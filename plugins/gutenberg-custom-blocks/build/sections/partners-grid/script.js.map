{"version":3,"file":"sections/partners-grid/script.js","mappings":"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","sources":["webpack://gutenberg-custom-blocks/./src/sections/partners-grid/script.js"],"sourcesContent":["window.addEventListener(\"DOMContentLoaded\", () => {\r\n\r\n    const partnersGridSections = document.querySelectorAll('[data-partners-grid]');\r\n    partnersGridSections.forEach(partnersGridSection => {\r\n        const postsContainer = partnersGridSection.querySelector('[data-posts-container]');\r\n        const btnShowMore = partnersGridSection.querySelector('[data-action=\"show-more-parnters\"]');\r\n        const filterButtons = partnersGridSection.querySelectorAll('[data-category-slug]');\r\n        const loader = Loader.create();\r\n        const state = new Store({ slug: 'all', page: 1 });\r\n\r\n        state.onUpdate(async (prevState, state) => {\r\n            loader.addTo(partnersGridSection);\r\n\r\n            setActiveFilterButtons(filterButtons, state.slug);\r\n\r\n            const res = await Fetch(`/partners?category=${state.slug}&page=${state.page}`)\r\n            if(res?.posts) {\r\n                renderLoadedCards(res.posts, postsContainer, prevState.slug === state.slug);\r\n                initScrollContainers();\r\n                btnShowMore.classList.toggle('!hidden', res.max_num_pages == state.page);\r\n            }\r\n\r\n            loader.remove();\r\n        });\r\n\r\n        btnShowMore && btnShowMore.addEventListener('click', () => {\r\n            state.setState({ page: state.getState().page + 1 });\r\n        });\r\n\r\n        partnersGridSection.addEventListener('click', (e) => {\r\n\r\n            if(e.target.closest('[data-action=\"show-details\"]')) {\r\n                const card = e.target.closest('.partner-card');\r\n                card && card.classList.add('active');\r\n            }\r\n\r\n            if(e.target.closest('[data-action=\"close-details\"]')) {\r\n                const card = e.target.closest('.partner-card');\r\n                card && card.classList.remove('active');\r\n            }\r\n\r\n            if(e.target.closest('[data-category-slug]')) {\r\n                const filterBtn = e.target.closest('[data-category-slug]');\r\n                const slug = filterBtn.getAttribute('data-category-slug');\r\n                state.setState({ slug, page: 1 });\r\n            }\r\n        });\r\n    });\r\n\r\n    function renderLoadedCards(posts, container, append = false) {\r\n        if(!container) return;\r\n\r\n        if(!append) {\r\n            container.innerHTML = '';\r\n        }\r\n\r\n        if(posts && posts.length) {\r\n            posts.forEach(post => {\r\n                container.insertAdjacentHTML('beforeend', `\r\n                    <div class=\"partner-card card-rotate relative md-and-lg-max:[&:last-child:nth-child(odd)]:col-span-2\">\r\n                        <div class=\"card-rotate-front nested-bg-item p-[5px] rounded-[12px] h-full flex flex-col\">\r\n                           <div class=\"absolute top-[15px] left-0 right-0 pl-[15px] pr-[70px] flex flex-wrap gap-[5px]\">\r\n                                ${post.categories.length\r\n                                    ? post.categories.map(category => {\r\n                                        return `\r\n                                            <div class=\"category-tag category-colors-${category.type}\">\r\n                                                <img src=\"${category.img}\" alt=\"category-icon\">\r\n                                                <span>\r\n                                                    ${category.name}\r\n                                                </span>\r\n                                            </div>\r\n                                        `;\r\n                                    } ).join(' ')\r\n                                    : ''}\r\n                           </div>\r\n                            \r\n                           ${post.excerpt\r\n                            ? `\r\n                              <button data-action=\"show-details\" class=\"absolute top-[15px] right-[15px] cursor-pointer hover:scale-105 transition-transform\">\r\n                                 <img class=\"h-[44px] lg:h-[30px] w-[44px] lg:w-[30px] object-contain\" src=\"${document.location.origin}/wp-content/themes/teachForUkraine/assets/images/icons/info.svg\" alt=\"info\">\r\n                              </button>\r\n                            `\r\n                            : ''}\r\n\r\n                           <div class=\"h-[177px] rounded-[8px] bg-[var(--bg)] pt-[44px] pb-[20px] px-[20px] flex items-center justify-center\">\r\n                              ${post.logo}\r\n                           </div>\r\n                           <div class=\"mt-[5px] p-[15px] lg:pt-[25px] lg:pb-[20px] shrink grow\">\r\n                              <div class=\"h3 text-dark-primary\">\r\n                                 ${post.title}\r\n                              </div>\r\n                              ${post.url\r\n                                ?  `\r\n                                <div class=\"mt-[20px]\">\r\n                                    <a href=\"${post.url}\" class=\"btn-with-arrow accent-first\">\r\n                                       <span data-text=\"${post.text_go_to}\"></span>\r\n                                    </a>\r\n                                 </div>\r\n                                `\r\n                                : ''}\r\n                           </div>\r\n                        </div>\r\n                        <div class=\"card-rotate-back nested-bg-item absolute top-0 left-0 h-full w-full rounded-[12px] flex flex-col p-[20px]\">\r\n                           <button data-action=\"close-details\" class=\"absolute top-[20px] right-[20px] icon-x-mark flex items-center justify-center h-[44px] w-[44px] rounded-[8px] bg-dark-primary text-light-primary text-sm transition-colors hover:bg-dark-primary-80\"></button>\r\n                           <div class=\"h-[55px] lg:h-[72px] shrink-0 grow-0 flex items-center\">\r\n                                ${post.logo}\r\n                           </div>\r\n                           <div class=\"h3 text-dark-primary mt-[20px]\">\r\n                                ${post.title}\r\n                           </div>\r\n                           <div class=\"mt-[10px] h-full overflow-auto\">\r\n                              <div data-scroll-container class=\"max-h-full [&_.swiper-scrollbar]:right-0\">\r\n                                 <div class=\"text-dark-primary text-md pr-[10px]\">\r\n                                    ${post.excerpt}\r\n                                 </div>\r\n                              </div>\r\n                           </div>\r\n                            ${post.url\r\n                            ?  `\r\n                            <div class=\"mt-[20px]\">\r\n                                <a href=\"${post.url}\" class=\"btn-with-arrow accent-first\">\r\n                                    <span data-text=\"${post.text_go_to}\"></span>\r\n                                </a>\r\n                                </div>\r\n                            `\r\n                            : ''}\r\n                        </div>\r\n                     </div>\r\n                `);\r\n            });\r\n        }\r\n    }\r\n\r\n    function setActiveFilterButtons(buttons, currentSlug) {\r\n        if(!buttons && !buttons.length) return;\r\n\r\n        buttons.forEach(btn => btn.classList.toggle('active', btn.getAttribute('data-category-slug') === currentSlug));\r\n    }\r\n\r\n});\r\n\r\n"],"names":["window","addEventListener","partnersGridSections","document","querySelectorAll","forEach","partnersGridSection","postsContainer","querySelector","btnShowMore","filterButtons","loader","Loader","create","state","Store","slug","page","onUpdate","prevState","addTo","setActiveFilterButtons","res","Fetch","posts","renderLoadedCards","initScrollContainers","classList","toggle","max_num_pages","remove","setState","getState","e","target","closest","card","add","filterBtn","getAttribute","container","append","innerHTML","length","post","insertAdjacentHTML","categories","map","category","type","img","name","join","excerpt","location","origin","logo","title","url","text_go_to","buttons","currentSlug","btn"],"sourceRoot":""}