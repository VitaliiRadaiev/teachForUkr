{"version":3,"file":"sections/people-grid/script.js","mappings":";;;;AACAA,MAAM,CAACC,gBAAgB,CAAC,kBAAkB,EAAE,MAAM;EAC9C,MAAMC,kBAAkB,GAAGC,QAAQ,CAACC,gBAAgB,CAAC,oBAAoB,CAAC;EAC1EF,kBAAkB,CAACG,OAAO,CAACC,iBAAiB,IAAI;IAC5C,IAAIA,iBAAiB,CAACC,SAAS,CAACC,QAAQ,CAAC,4BAA4B,CAAC,EAAE;MACpE,MAAMC,YAAY,GAAGH,iBAAiB,CAACI,aAAa,CAAC,eAAe,CAAC;MACrED,YAAY,CAACF,SAAS,CAACI,GAAG,CAAC,SAAS,CAAC;IACzC;IAEA,IAAIL,iBAAiB,CAACM,YAAY,CAAC,0BAA0B,CAAC,EAAE;MAC5D,MAAMC,QAAQ,GAAGP,iBAAiB,CAACQ,YAAY,CAAC,0BAA0B,CAAC;MAC3E,MAAMC,cAAc,GAAGT,iBAAiB,CAACI,aAAa,CAAC,wBAAwB,CAAC;MAChF,MAAMM,WAAW,GAAGV,iBAAiB,CAACI,aAAa,CAAC,+BAA+B,CAAC;MACpF,MAAMO,MAAM,GAAGC,MAAM,CAACC,MAAM,CAAC,CAAC;MAC9B,MAAMC,KAAK,GAAG,IAAIC,KAAK,CAAC;QAAER,QAAQ;QAAES,IAAI,EAAE;MAAE,CAAC,CAAC;MAE9CF,KAAK,CAACG,QAAQ,CAAC,OAAOC,SAAS,EAAEJ,KAAK,KAAK;QACvCH,MAAM,CAACQ,KAAK,CAACnB,iBAAiB,CAAC;QAE/B,MAAMoB,GAAG,GAAG,MAAMC,KAAK,CAAC,oBAAoBP,KAAK,CAACP,QAAQ,SAASO,KAAK,CAACE,IAAI,oBAAoB,CAAC;QAClG,IAAII,GAAG,EAAEE,KAAK,EAAE;UACZC,iBAAiB,CAACH,GAAG,CAACE,KAAK,EAAEb,cAAc,EAAES,SAAS,CAACX,QAAQ,IAAIO,KAAK,CAACP,QAAQ,CAAC;UAClFG,WAAW,IAAIA,WAAW,CAACT,SAAS,CAACuB,MAAM,CAAC,SAAS,EAAEJ,GAAG,CAACK,aAAa,IAAIX,KAAK,CAACE,IAAI,CAAC;QAC3F;QAEAL,MAAM,CAACe,MAAM,CAAC,CAAC;MACnB,CAAC,CAAC;MAEFhB,WAAW,IAAIA,WAAW,CAACf,gBAAgB,CAAC,OAAO,EAAE,MAAM;QACvDmB,KAAK,CAACa,QAAQ,CAAC;UAAEX,IAAI,EAAEF,KAAK,CAACc,QAAQ,CAAC,CAAC,CAACZ,IAAI,GAAG;QAAE,CAAC,CAAC;MACvD,CAAC,CAAC;MAEF,SAASO,iBAAiBA,CAACD,KAAK,EAAEO,SAAS,EAAE;QACzC,IAAI,CAACA,SAAS,EAAE;QAEhB,IAAIP,KAAK,IAAIA,KAAK,CAACQ,MAAM,EAAE;UACvBR,KAAK,CAACvB,OAAO,CAACgC,IAAI,IAAI;YAClBF,SAAS,CAACG,kBAAkB,CAAC,WAAW,EAAEC,uBAAuB,CAACF,IAAI,CAAC,CAAC;UAC5E,CAAC,CAAC;QACN;MACJ;IACJ;EACJ,CAAC,CAAC;AACN,CAAC,CAAC,C","sources":["webpack://gutenberg-custom-blocks/./src/sections/people-grid/script.js"],"sourcesContent":["\r\nwindow.addEventListener(\"DOMContentLoaded\", () => {\r\n    const peopleGridSections = document.querySelectorAll('[data-people-grid]');\r\n    peopleGridSections.forEach(peopleGridSection => {\r\n        if (peopleGridSection.classList.contains('[&_.show-more-btn]:!hidden')) {\r\n            const buttonsGroup = peopleGridSection.querySelector('.button-group');\r\n            buttonsGroup.classList.add('!hidden');\r\n        }\r\n\r\n        if (peopleGridSection.hasAttribute('data-selected-categories')) {\r\n            const category = peopleGridSection.getAttribute('data-selected-categories');\r\n            const postsContainer = peopleGridSection.querySelector('[data-posts-container]');\r\n            const btnShowMore = peopleGridSection.querySelector('[data-action=\"show-more-btn\"]');\r\n            const loader = Loader.create();\r\n            const state = new Store({ category, page: 1 });\r\n\r\n            state.onUpdate(async (prevState, state) => {\r\n                loader.addTo(peopleGridSection);\r\n\r\n                const res = await Fetch(`/people?category=${state.category}&page=${state.page}&posts_per_page=12`);\r\n                if (res?.posts) {\r\n                    renderLoadedCards(res.posts, postsContainer, prevState.category == state.category);\r\n                    btnShowMore && btnShowMore.classList.toggle('!hidden', res.max_num_pages == state.page);\r\n                }\r\n\r\n                loader.remove();\r\n            });\r\n\r\n            btnShowMore && btnShowMore.addEventListener('click', () => {\r\n                state.setState({ page: state.getState().page + 1 });\r\n            });\r\n\r\n            function renderLoadedCards(posts, container) {\r\n                if (!container) return;\r\n\r\n                if (posts && posts.length) {\r\n                    posts.forEach(post => {\r\n                        container.insertAdjacentHTML('beforeend', renderPopleCardAsString(post));\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    });\r\n});"],"names":["window","addEventListener","peopleGridSections","document","querySelectorAll","forEach","peopleGridSection","classList","contains","buttonsGroup","querySelector","add","hasAttribute","category","getAttribute","postsContainer","btnShowMore","loader","Loader","create","state","Store","page","onUpdate","prevState","addTo","res","Fetch","posts","renderLoadedCards","toggle","max_num_pages","remove","setState","getState","container","length","post","insertAdjacentHTML","renderPopleCardAsString"],"sourceRoot":""}